function getValidationRules(){var custom={errorElement:"span",errorClass:"help-block help-block-error",focusInvalid:!1,invalidHandler:function(event,validator){},highlight:function(element){$(element).closest(".form-group").addClass("has-error")},unhighlight:function(element){$(element).closest(".form-group").removeClass("has-error"),id=$(element).attr("id"),name=$(element).attr("name"),$("#"+id+"-error").each(function(){""==$(this).text()&&$(this).remove()})},resetError:function(form){$(form).find(".help-block-error").remove(),$(form).find(".form-group.has-error").removeClass("has-error"),$(form).find(".form-group.has-success").removeClass("has-success")},errorPlacement:function(error,element){element.closest(".input-group").size()>0?error.insertAfter(element.closest(".input-group")):element.siblings(".help-block-default").size()>0?(element.siblings(".help-block-default").hide(),error.insertAfter(element.siblings(".help-block-default"))):element.siblings(".form-control-focus").size()>0?error.insertAfter(element.siblings(".form-control-focus")):element.attr("data-error-container")?error.appendTo(element.attr("data-error-container")):element.closest(".radio-list").size()>0?error.appendTo(element.closest(".radio-list").parent()):element.closest(".radio-inline").size()>0?error.appendTo(element.closest(".radio-inline")):element.closest(".checkbox-list").size()>0?error.appendTo(element.closest(".checkbox-list")):element.closest(".checkbox-inline").size()>0?error.appendTo(element.closest(".checkbox-inline")):element.parent(".intl-tel-input").size()>0?error.insertAfter(element.parent(".intl-tel-input")):error.insertAfter(element)},success:function(label){label.closest(".form-group").removeClass("has-error"),label.closest(".form-group").find(".help-block-error").removeClass("help-block-error"),label.closest(".form-group").find(".help-block-default").show()}};return custom}function init_data_sort(){$("[data-sort]").click(function(){var field=$(this).attr("data-sort"),f=$("#sort_field").val();if(f==field){var o=$("#sort_order").val();""==o||"DESC"==o?$("#sort_order").val("ASC"):$("#sort_order").val("DESC")}else $("#sort_field").val(field),$("#sort_order").val("ASC");$(this).parents("form").submit()})}function alertBox(title,message,callback,tout){null==tout&&(tout=1500),$.smallBox({title:title,content:message,color:"#3ca0ef",timeout:tout,icon:"icon-check"},function(){null!=callback&&callback()})}function errorBox(title,message,callback,tout){null==tout&&(tout=1e4),$.smallBox({title:title,content:message,color:"#e35555",timeout:tout,icon:"icon-info"},function(){null!=callback&&callback()})}function confirmBox(title,message,onYes,onNo){$.SmartMessageBox({title:title,content:message,buttons:"["+g_messages.OK+"]["+g_messages.CANCEL+"]"},function(ButtonPressed){ButtonPressed==g_messages.OK&&null!=onYes&&onYes(),ButtonPressed==g_messages.CANCEL&&null!=onNo&&onNo()})}function confirmInputBox(title,message,placeholder,onYes,onNo){$.SmartMessageBox({title:title,content:message,input:"text",placeholder:placeholder,buttons:"["+g_messages.OK+"]["+g_messages.CANCEL+"]"},function(ButtonPressed,Value){ButtonPressed==g_messages.OK&&null!=onYes&&onYes(Value),ButtonPressed==g_messages.CANCEL&&null!=onNo&&onNo(Value)})}function confirmTextarea(title,message,placeholder,value,onYes,onNo){$.SmartMessageBox({title:title,content:message,input:"textarea",placeholder:placeholder,value:value,buttons:"["+g_messages.OK+"]["+g_messages.CANCEL+"]"},function(ButtonPressed,Value){ButtonPressed==g_messages.OK&&null!=onYes&&onYes(Value),ButtonPressed==g_messages.CANCEL&&null!=onNo&&onNo(Value)})}function confirmSelectBox(title,message,placeholder,options,onYes,onNo){$.SmartMessageBox({title:title,content:message,input:"select",options:options,placeholder:placeholder,buttons:"["+g_messages.OK+"]["+g_messages.CANCEL+"]"},function(ButtonPressed,Value){ButtonPressed==g_messages.OK&&null!=onYes&&onYes(Value),ButtonPressed==g_messages.CANCEL&&null!=onNo&&onNo(Value)})}function confirmSelectInputBox(title,message,placeholder,options,onYes,onNo){$.SmartMessageBox({title:title,content:message,input:"select|input",options:options,placeholder:placeholder,buttons:"["+g_messages.OK+"]["+g_messages.CANCEL+"]"},function(ButtonPressed,Value){ButtonPressed==g_messages.OK&&null!=onYes&&onYes(Value),ButtonPressed==g_messages.CANCEL&&null!=onNo&&onNo(Value)})}function confirmPasswordBox(title,message,onYes,onNo){$.SmartMessageBox({title:title,content:message,input:"password",buttons:"["+g_messages.OK+"]["+g_messages.CANCEL+"]"},function(ButtonPressed,Value){ButtonPressed==g_messages.OK&&null!=onYes&&onYes(Value),ButtonPressed==g_messages.CANCEL&&null!=onNo&&onNo(Value)})}function formatDate(date,format,options){return formatDates(date,null,format,options)}function formatDates(date1,date2,format,options){options=options||date_defaults;var i,c,i2,formatter,date=date1,otherDate=date2,len=format.length,res="";for(i=0;i<len;i++)if(c=format.charAt(i),"'"==c){for(i2=i+1;i2<len;i2++)if("'"==format.charAt(i2)){date&&(res+=i2==i+1?"'":format.substring(i+1,i2),i=i2);break}}else if("("==c){for(i2=i+1;i2<len;i2++)if(")"==format.charAt(i2)){var subres=formatDate(date,format.substring(i+1,i2),options);toInt(subres.replace(/\D/,""),10)&&(res+=subres),i=i2;break}}else if("["==c){for(i2=i+1;i2<len;i2++)if("]"==format.charAt(i2)){var subformat=format.substring(i+1,i2),subres=formatDate(date,subformat,options);subres!=formatDate(otherDate,subformat,options)&&(res+=subres),i=i2;break}}else if("{"==c)date=date2,otherDate=date1;else if("}"==c)date=date1,otherDate=date2;else{for(i2=len;i2>i;i2--)if(formatter=dateFormatters[format.substring(i,i2)]){date&&(res+=formatter(date,options)),i=i2-1;break}i2==i&&date&&(res+=c)}return res}function zeroPad(n){return(n<10?"0":"")+n}function diff_times(start,end){try{if(""==start||""==end)return"";var s=start.split(":"),e=end.split(":");return s=60*toInt(s[0],10)+toInt(s[1],10),e=60*toInt(e[0],10)+toInt(e[1],10),d=e-s,zeroPad(Math.floor(d/60))+":"+zeroPad(d%60)}catch(e){}}function goto_url(url){base_url=$("base").attr("href"),"/"!=url.charAt(0)&&"."!=url.charAt(0)&&(document.location=base_url+url)}function set_access(){}function get_servertime(callback){$.ajax({url:"common/now_ajax",type:"post",dataType:"json",success:function(ret){0==ret.err_code&&callback(ret.now)},error:function(){},complete:function(){}})}function page_refresh(refresh_url,refresh_obj,callback,step){0==g_first_refresh?$.ajax({url:refresh_url,type:"post",success:function(data){$(refresh_obj).html(data),eval(callback)},error:function(){},complete:function(){}}):eval(callback),void 0==step?step_seconds=1e4:step_seconds=1e3*step,step_seconds>0&&setTimeout("page_refresh('"+refresh_url+"','"+refresh_obj+"','"+callback+"',"+step+")",step_seconds),g_first_refresh=!1}function toInt(n){return parseInt(n,10)}function toFloat(f){return/^(\-|\+)?([0-9]+(\.[0-9]+)?|Infinity)$/.test(f)?Number(f):""}function showMask(msg){null!==msg&&void 0!==msg||(msg=g_messages.SUBMITTING),""!==msg&&(msg="<h2>"+msg+"</h2>"),hideMask();var mask=$('<table class="submit-mask"><tr><td align="center" valign="middle">'+msg+"</td></tr></table>");mask.width($(window).width()),mask.height($(window).height()),$("body").append(mask)}function hideMask(){$(".submit-mask").remove()}function modalAlert(title,message,confrim,callback){title=title||g_messages.ALERT,tmpl='<table class="modal-alert-box-container"><tr><td align="center" valign="middle">',tmpl+='<section class="modal-alert-box">',tmpl+=" <header>"+title+"</header>",tmpl+=' <div class="body">'+message+"</div>",tmpl+=" <footer>",tmpl+='  <button id="modal_alert_ok" type="button" class="btn btn-primary">'+confrim+"</button>",tmpl+=" </footer>",tmpl+="</section>",tmpl+="</td></tr></table>",showMask("");var box=$(tmpl);box.width($(window).width()),box.height($(window).height()),$("body").append(box),$("#modal_alert_ok").click(function(){hideMask(),$(".modal-alert-box-container").remove(),callback()})}function getFileExtension(file_name){if(file_name){var fs=file_name.split(".");return fs.length<2?"":fs[fs.length-1].toLowerCase()}return""}function checkFileExtension(file_name,extensions){ext=getFileExtension(file_name);for(var i=0;i<extensions.length;i++)if(ext==extensions[i])return!0;return!1}function downLink(path,file_name,file_size,down_label){void 0===file_name&&(file_name=""),void 0===file_size&&(file_size=0);var view_url="common/view/"+path+"/"+file_name,zoomview_url="common/zoomview/"+path+"/"+file_name,down_url="common/down/"+path+"/"+file_name,target="";if(lnk="",checkFileExtension(file_name,["jpg","jpeg","png","bmp","gif","tiff"])){var thumb="common/view/"+path+"_thumb.jpg/"+file_name;lnk+="<a href='"+zoomview_url+"' class='attach fancybox-image' title='"+file_name+" ("+file_size+")'><img src='"+thumb+"'></a>"}else checkFileExtension(file_name,["doc","docx"])?lnk+="<a href='"+view_url+"' class='attach' title='"+file_name+" ("+file_size+")'><i class='fa fa-file-word-o'></i></a>":checkFileExtension(file_name,["xls","xlsx"])?lnk+="<a href='"+view_url+"' class='attach' title='"+file_name+" ("+file_size+")'><i class='fa fa-file-excel-o'></i></a>":checkFileExtension(file_name,["ppt","pptx"])?lnk+="<a href='"+view_url+"' class='attach' title='"+file_name+" ("+file_size+")'><i class='fa fa-file-powerpoint-o'></i></a>":checkFileExtension(file_name,["pdf"])?(target="_blank",lnk+="<a href='"+view_url+"' class='attach' target='"+target+"' title='"+file_name+" ("+file_size+")'><i class='fa fa-file-pdf-o'></i></a>"):checkFileExtension(file_name,["avi","mpg","mp4","mov"])?(target="_blank",lnk+="<a href='"+view_url+"' class='attach' target='"+target+"' title='"+file_name+" ("+file_size+")'><i class='fa fa-file-movie-o'></i></a>"):checkFileExtension(file_name,["wav","mp3","ogg","midi"])?lnk+="<a href='"+view_url+"' class='attach' title='"+file_name+" ("+file_size+")'><i class='fa fa-file-sound-o'></i></a>":checkFileExtension(file_name,["rar","zip","7z"])?lnk+="<a href='"+view_url+"' class='attach' title='"+file_name+" ("+file_size+")'><i class='fa fa-file-archive-o'></i></a>":lnk+="<a href='"+view_url+"' class='attach' title='"+file_name+" ("+file_size+")'><i class='fa fa-file-text-o'></i></a>";return lnk+="<div class='down-container'><a href='"+down_url+"' class='file_name' target='"+target+"' title='"+file_name+" ("+file_size+")'><img src='img/download.png'></a></div>",lnk}function numberFormat(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function roundNumber(v,point){return void 0===point&&(point=0),p=Math.pow(10,point),Math.round(v*p)/p}var disable_alarm=!1;$.fn.aclick=function(callback){$(this).click(function(e){$(this).hasAttr("disabled")||(this.cbClick=callback,this.cbClick(e))})},$.fn.aenable=function(){$(this).removeAttr("disabled")},$.fn.adisable=function(){$(this).attr("disabled","disabled")},$.fn.hasAttr=function(attr){var obj=$(this)[0];return obj.hasAttribute?obj.hasAttribute(attr):obj.getAttribute(attr)},$.fn.isChecked=function(){var obj=$(this)[0];return obj.checked},String.prototype.trim||(String.prototype.trim=function(){return this.toString().replace(/^([\s\t\n]*)|([\s\t\n]*)$/g,"")}),String.prototype.strip_space||(String.prototype.strip_space=function(){return this.toString().replace(/([\s\t\n]+)/g," ")});var isIE67=!1;$(function(){isIE67=$.browser.msie&&$.browser.version<=7,$.fn.mask&&$("[data-mask]").each(function(){$this=$(this);var mask=$this.attr("data-mask")||"error...",mask_placeholder=$this.attr("data-mask-placeholder")||"X";$this.mask(mask,{placeholder:mask_placeholder})}),init_data_sort(),disable_alarm||set_access(),$("a").each(function(){var href=$(this).attr("href");null!=href&&0==href.indexOf("#")&&href.length>1&&$(this).attr("href",document.location.href+href)})}),jQuery.validator.addMethod("isAfterThan",function(value,element,param){var target=$(param);return""==value||new Date(value)>new Date(target.val())}),jQuery.validator.addMethod("bigThan",function(value,element,param){var target=$(param);return this.settings.onfocusout&&target.unbind(".validate-bigThan").bind("blur.validate-bigThan",function(){$(element).valid()}),""==value||parseFloat(value)>parseFloat(target.val())}),jQuery.validator.addMethod("smallThan",function(value,element,param){var target=$(param);return this.settings.onfocusout&&target.unbind(".validate-bigThan").bind("blur.validate-bigThan",function(){$(element).valid()}),""==value||parseFloat(value)<parseFloat(target.val())}),jQuery.validator.addMethod("imagefile",function(value,element,param){var found=value.match(/\.(jpg|jpeg|png)$/gi);return null!=found}),jQuery.validator.addMethod("pwd_min_length",function(value,element,param){return""==value||value.length>=param}),jQuery.validator.addMethod("pwd_strength",function(value,element,param){var e=value.match(/([A-Z])/gi),n=value.match(/([0-9])/gi),s=value.match(/([^A-Z0-9])/gi),space=value.match(/([\s])/gi);return this.optional(element)||null!=e&&null!=n&&null!=s&&null==space}),jQuery.validator.addMethod("real_name",function(value,element,param){var n=value.match(/([0-9])/gi);return this.optional(element)||null==n}),jQuery.validator.addMethod("unique_login_id",function(value,element){var ret=!1;return App.callAPI("api/common/is_exist",{login_id:value},!1).done(function(res){0==res.err_code&&(ret=!res.is_exist)}),ret}),jQuery.validator.addMethod("mobile",function(value,element){return this.optional(element)||/^[\+]*[ \-\d]+$/.test(value)}),jQuery.validator.addMethod("tel",function(value,element){return this.optional(element)||/^[\+]*[ \-\d]+$/.test(value)}),jQuery.validator.addMethod("requiredOr",function(value,element,param){var check=$.trim(value).length>0;if(check)return!0;if(param)for(i=0;i<param.length;i++){var value=$(param[i]).val(),check=$.trim(value).length>0;if(check)return!0}return!1}),jQuery.validator.addMethod("requireCheck",function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";if("select"===element.nodeName.toLowerCase()){var val=$(element).val();return val&&val.length>0}return this.checkable(element)?this.getLength(value,element)>0:$.trim(value).length>0}),jQuery.validator.addMethod("requireRating",function(value,element,param){return value>0}),jQuery.validator.addMethod("passkey",function(value,element){return this.optional(element)||1==$(element).prop("valid_passkey")});var date_defaults={titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"hh:mm"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"}},dateFormatters={s:function(d){return d.getSeconds()},ss:function(d){return zeroPad(d.getSeconds())},m:function(d){return d.getMinutes()},mm:function(d){return zeroPad(d.getMinutes())},h:function(d){return d.getHours()%12||12},hh:function(d){return zeroPad(d.getHours()%12||12)},H:function(d){return d.getHours()},HH:function(d){return zeroPad(d.getHours())},d:function(d){return d.getDate()},dd:function(d){return zeroPad(d.getDate())},ddd:function(d,o){return o.dayNamesShort[d.getDay()]},dddd:function(d,o){return o.dayNames[d.getDay()]},M:function(d){return d.getMonth()+1},MM:function(d){return zeroPad(d.getMonth()+1)},MMM:function(d,o){return o.monthNamesShort[d.getMonth()]},MMMM:function(d,o){return o.monthNames[d.getMonth()]},yy:function(d){return(d.getFullYear()+"").substring(2)},yyyy:function(d){return d.getFullYear()},t:function(d){return d.getHours()<12?"a":"p"},tt:function(d){return d.getHours()<12?"am":"pm"},T:function(d){return d.getHours()<12?"A":"P"},TT:function(d){return d.getHours()<12?"AM":"PM"},u:function(d){return formatDate(d,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(d){var date=d.getDate();return date>10&&date<20?"th":["st","nd","rd"][date%10-1]||"th"}},first_access=1,g_first_refresh=!0;