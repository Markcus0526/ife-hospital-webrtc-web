var App=function(){var e,t,a=!1,o=!1,n=!1,s=!1,r=[],l=(t={xs:480,sm:768,md:992,lg:1200})[e="md"]?t[e]:0,d="",c=function(e,t){var i=$.ajax({url:d+e,data:JSON.stringify(t),type:"post",dataType:"json",contentType:!1,processData:!1,success:function(e){return e},error:function(){return-1}});return defer=$.Deferred(),defer.promise({}),i.done(function(e){0==e.err_code?defer.resolve(e):defer.reject(e)}).fail(function(e){e={err_code:-1,err_msg:g_messages.ERR_FAIL_CALL_SERVER},defer.reject(e)}),defer},h=function(e){"rtl"===$("body").css("direction")&&(a=!0),o=!!navigator.userAgent.match(/MSIE 8.0/),n=!!navigator.userAgent.match(/MSIE 9.0/),(s=!!navigator.userAgent.match(/MSIE 10.0/))&&$("html").addClass("ie10"),(s||n||o)&&$("html").addClass("ie"),d=e},p=function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}},u=function(e,t){var i=e&&0<e.size()?e.offset().top:0;e&&($("body").hasClass("page-header-fixed")&&(i-=$(".page-header").height()),i+=t||-1*e.height()),$("html,body").animate({scrollTop:i},"slow")},f=function(e){e&&e.animate?($(".page-spinner-bar").remove(),$("body").append('<div class="page-spinner-bar"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>')):($(".page-loading").remove(),$("body").append('<div class="page-loading"><img src="'+this.getGlobalImgPath()+'loading-spinner-grey.gif"/>&nbsp;&nbsp;<span>'+(e&&e.message?e.message:"Loading...")+"</span></div>"))},g=function(){$(".page-loading, .page-spinner-bar").remove()},m=function(){for(var e=0;e<r.length;e++){r[e].call()}},b=function(e){r.push(e)},v=function(e){$(e).each(function(){var e;$(this).attr("data-initialized")||(e=$(this).attr("data-height")?$(this).attr("data-height"):$(this).css("height"),$(this).slimScroll({allowPageScroll:!0,size:"7px",color:$(this).attr("data-handle-color")?$(this).attr("data-handle-color"):"#bbb",wrapperClass:$(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):"slimScrollDiv",railColor:$(this).attr("data-rail-color")?$(this).attr("data-rail-color"):"#eaeaea",position:a?"left":"right",height:e,alwaysVisible:"1"==$(this).attr("data-always-visible"),railVisible:"1"==$(this).attr("data-rail-visible"),disableFadeOut:!0}),$(this).attr("data-initialized","1"))})},y=function(e){$(e).each(function(){if("1"===$(this).attr("data-initialized")){$(this).removeAttr("data-initialized"),$(this).removeAttr("style");var e={};$(this).attr("data-handle-color")&&(e["data-handle-color"]=$(this).attr("data-handle-color")),$(this).attr("data-wrapper-class")&&(e["data-wrapper-class"]=$(this).attr("data-wrapper-class")),$(this).attr("data-rail-color")&&(e["data-rail-color"]=$(this).attr("data-rail-color")),$(this).attr("data-always-visible")&&(e["data-always-visible"]=$(this).attr("data-always-visible")),$(this).attr("data-rail-visible")&&(e["data-rail-visible"]=$(this).attr("data-rail-visible")),$(this).slimScroll({wrapperClass:$(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):"slimScrollDiv",destroy:!0});var i=$(this);$.each(e,function(e,t){i.attr(e,t)})}})},w=function(){var e,t=$(".page-content"),i=$(".page-sidebar"),a=$("body");if(!0===a.hasClass("page-footer-fixed")&&!1===a.hasClass("page-sidebar-fixed")){var n=p().height-$(".page-footer").outerHeight()-$(".page-header").outerHeight();t.height()<n&&t.attr("style","min-height:"+n+"px")}else{if(a.hasClass("page-sidebar-fixed"))e=k(),!1===a.hasClass("page-footer-fixed")&&(e-=$(".page-footer").outerHeight());else{var o=$(".page-header").outerHeight(),s=$(".page-footer").outerHeight();(e=p().width<l?p().height-o-s:i.height()+20)+o+s<=p().height&&(e=p().height-o-s)}t.attr("style","min-height:"+e+"px")}},k=function(){var e=p().height-$(".page-header").outerHeight();return $("body").hasClass("page-footer-fixed")&&(e-=$(".page-footer").outerHeight()),e},C=function(){var e=$(".page-sidebar-menu");y(e),0!==$(".page-sidebar-fixed").size()?p().width>=l&&(e.attr("data-height",k()),v(e),w()):w()},x=function(){var e=$("body");e.hasClass("page-sidebar-fixed")&&$(".page-sidebar").on("mouseenter",function(){e.hasClass("page-sidebar-closed")&&$(this).find(".page-sidebar-menu").removeClass("page-sidebar-menu-closed")}).on("mouseleave",function(){e.hasClass("page-sidebar-closed")&&$(this).find(".page-sidebar-menu").addClass("page-sidebar-menu-closed")})},S=function(){var e,t=$(".full-height-content");if(e=p().height-$(".page-header").outerHeight(!0)-$(".page-footer").outerHeight(!0)-$(".page-title").outerHeight(!0)-$(".page-bar").outerHeight(!0),t.hasClass("portlet")){var i=t.find(".portlet-body");if(p().width<l)return void y(i.find(".full-height-content-body"));e=e-t.find(".portlet-title").outerHeight(!0)-parseInt(t.find(".portlet-body").css("padding-top"))-parseInt(t.find(".portlet-body").css("padding-bottom"))-2,t.hasClass("full-height-content-scrollable")?(e-=35,i.find(".full-height-content-body").css("height",e),v(i.find(".full-height-content-body"))):i.css("min-height",e)}else{if(p().width<l)return void y(t.find(".full-height-content-body"));t.hasClass("full-height-content-scrollable")?(e-=35,t.find(".full-height-content-body").css("height",e),v(t.find(".full-height-content-body"))):t.css("min-height",e)}},M=function(){$().bootstrapSwitch&&$(".make-switch").bootstrapSwitch()},D=function(e){jQuery.fancybox&&(e=e||"",e+=" ",jQuery(e+".fancybox").each(function(){switch($this=$(this),width=$this.attr("fancy-width"),width){case"max":width=$(window).width()-60;break;case void 0:case"":width=void 0;break;default:width=toInt(width)}switch(height=$this.attr("fancy-height"),height){case"max":height=$(window).height()-160;break;case void 0:case"":height=void 0;break;default:height=toInt(height)}$this.fancybox({type:"iframe",width:width,height:height,autoSize:!1,closeBtn:!0,afterClose:function(){$this.trigger("fancyboxAfterClose")}})}),iw=$(window).width()-60,ih=$(window).height()-60,jQuery(e+".fancybox-image").fancybox({type:"iframe",width:iw,height:ih,autoSize:!1,title:!1,prevEffect:"none",nextEffect:"none"}),0<jQuery(e+".fancybox-button").size()&&(jQuery(e+".fancybox-button").fancybox({groupAttr:"data-rel",prevEffect:"none",nextEffect:"none",closeBtn:!0,helpers:{title:{type:"inside"}}}),$(e+".fancybox-video").fancybox({type:"iframe"})))},_=function(e){null==e&&(e="zh-CN"),jQuery().datepicker&&$(".date-picker").datepicker({orientation:"right",todayHighlight:!0,autoclose:!0,language:e,weekStart:0})},T=function(){jQuery().timepicker&&($(".timepicker-default").timepicker({autoclose:!0,showSeconds:!0,minuteStep:1}),$(".timepicker-no-seconds").timepicker({autoclose:!0,minuteStep:5}),$(".timepicker-24").timepicker({autoclose:!0,minuteStep:5,showSeconds:!1,showMeridian:!1}),$(".timepicker").parent(".input-group").on("click",".input-group-btn",function(e){e.preventDefault(),$(this).parent(".input-group").find(".timepicker").timepicker("showWidget")}))},H=function(){jQuery().daterangepicker&&($("#defaultrange").daterangepicker({format:"MM/DD/YYYY",separator:" to ",startDate:moment().subtract("days",29),endDate:moment(),minDate:"01/01/2012",maxDate:"12/31/2018"},function(e,t){$("#defaultrange input").val(e.format("MMMM D, YYYY")+" - "+t.format("MMMM D, YYYY"))}),$("#defaultrange_modal").daterangepicker({opens:"right",format:"MM/DD/YYYY",separator:" to ",startDate:moment().subtract("days",29),endDate:moment(),minDate:"01/01/2012",maxDate:"12/31/2018"},function(e,t){$("#defaultrange_modal input").val(e.format("MMMM D, YYYY")+" - "+t.format("MMMM D, YYYY"))}),$("#defaultrange_modal").on("click",function(){$("#daterangepicker_modal").is(":visible")&&0==$("body").hasClass("modal-open")&&$("body").addClass("modal-open")}))},I=function(){jQuery().datetimepicker&&($(".form_datetime").datetimepicker({autoclose:!0,format:"dd MM yyyy - hh:ii",pickerPosition:"bottom-left"}),$(".form_advance_datetime").datetimepicker({format:"dd MM yyyy - hh:ii",autoclose:!0,todayBtn:!0,startDate:"2013-02-14 10:00",pickerPosition:"bottom-left",minuteStep:10}),$(".form_meridian_datetime").datetimepicker({format:"dd MM yyyy - HH:ii P",showMeridian:!0,autoclose:!0,pickerPosition:"bottom-left",todayBtn:!0}),$("body").removeClass("modal-open"))};return{initHeader:function(){$(".page-header").on("click",'.hor-menu a[data-toggle="tab"]',function(e){e.preventDefault();var t=$(".hor-menu .nav").find("li.current");$("li.active",t).removeClass("active"),$(".selected",t).remove();var i=$(this).parents("li").last();i.addClass("current"),i.find("a:first").append('<span class="selected"></span>')}),$(".page-header").on("click",".search-form",function(e){$(this).addClass("open"),$(this).find(".form-control").focus(),$(".page-header .search-form .form-control").on("blur",function(e){$(this).closest(".search-form").removeClass("open"),$(this).unbind("blur")})}),$(".page-header").on("keypress",".hor-menu .search-form .form-control",function(e){if(13==e.which)return $(this).closest(".search-form").submit(),!1}),$(".page-header").on("mousedown",".search-form.open .submit",function(e){e.preventDefault(),e.stopPropagation(),$(this).closest(".search-form").submit()}),$('[data-hover="megamenu-dropdown"]').not(".hover-initialized").each(function(){$(this).dropdownHover(),$(this).addClass("hover-initialized")}),$(document).on("click",".mega-menu-dropdown .dropdown-menu",function(e){e.stopPropagation()})},setSidebarMenuActiveLink:function(e,t){var i,a,n,o;i=e,a=t,n=location.hash.toLowerCase(),o=$(".page-sidebar-menu"),"click"===i||"set"===i?a=$(a):"match"===i&&o.find("li > a").each(function(){var e=$(this).attr("href").toLowerCase();1<e.length&&n.substr(1,e.length-1)==e.substr(1)&&(a=$(this))}),a&&0!=a.size()&&"javascript:;"!==a.attr("href").toLowerCase()&&"#"!==a.attr("href").toLowerCase()&&(parseInt(o.data("slide-speed")),o.data("keep-expanded"),o.find("li.active").removeClass("active"),o.find("li > a > .selected").remove(),!1===o.hasClass("page-sidebar-menu-hover-submenu")?o.find("li.open").each(function(){0===$(this).children(".sub-menu").size()&&($(this).removeClass("open"),$(this).find("> a > .arrow.open").removeClass("open"))}):o.find("li.open").removeClass("open"),a.parents("li").each(function(){$(this).addClass("active"),$(this).find("> a > span.arrow").addClass("open"),1===$(this).parent("ul.page-sidebar-menu").size()&&$(this).find("> a").append('<span class="selected"></span>'),1===$(this).children("ul.sub-menu").size()&&$(this).addClass("open")}),"click"===i&&p().width<l&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click())},initSidebar:function(){var a;C(),$(".page-sidebar").on("click","li > a",function(e){var t=$(this).next().hasClass("sub-menu");if(!(p().width>=l&&1===$(this).parents(".page-sidebar-menu-hover-submenu").size()))if(!1!==t){if(!$(this).next().hasClass("sub-menu always-open")){var i=$(this).parent().parent(),a=$(this),n=$(".page-sidebar-menu"),o=$(this).next(),s=n.data("auto-scroll"),r=parseInt(n.data("slide-speed"));!0!==n.data("keep-expanded")&&(i.children("li.open").children("a").children(".arrow").removeClass("open"),i.children("li.open").children(".sub-menu:not(.always-open)").slideUp(r),i.children("li.open").removeClass("open")),o.is(":visible")?($(".arrow",$(this)).removeClass("open"),$(this).parent().removeClass("open"),o.slideUp(r,function(){!0===s&&!1===$("body").hasClass("page-sidebar-closed")&&($("body").hasClass("page-sidebar-fixed")?n.slimScroll({scrollTo:a.position().top}):u(a,-200)),w()})):t&&($(".arrow",$(this)).addClass("open"),$(this).parent().addClass("open"),o.slideDown(r,function(){!0===s&&!1===$("body").hasClass("page-sidebar-closed")&&($("body").hasClass("page-sidebar-fixed")?n.slimScroll({scrollTo:a.position().top}):u(a,-200)),w()})),e.preventDefault()}}else p().width<l&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click()}),$(".page-sidebar").on("click"," li > a.ajaxify",function(e){e.preventDefault(),scrollTop();var t=$(this).attr("href"),i=$(".page-sidebar ul"),a=($(".page-content"),$(".page-content .page-content-body"));i.children("li.active").removeClass("active"),i.children("arrow.open").removeClass("open"),$(this).parents("li").each(function(){$(this).addClass("active"),$(this).children("a > span.arrow").addClass("open")}),$(this).parents("li").addClass("active"),p().width<l&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click(),f();var n=$(this);$.ajax({type:"GET",cache:!1,url:t,dataType:"html",success:function(e){0===n.parents("li.open").size()&&$(".page-sidebar-menu > li.open > a").click(),g(),a.html(e),App.fixContentHeight(),Metronic.initAjax()},error:function(e,t,i){g(),a.html("<h4>Could not load the requested content.</h4>")}})}),$(".page-content").on("click",".ajaxify",function(e){e.preventDefault(),scrollTop();var t=$(this).attr("href"),a=($(".page-content"),$(".page-content .page-content-body"));f(),p().width<l&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click(),$.ajax({type:"GET",cache:!1,url:t,dataType:"html",success:function(e){g(),a.html(e),App.fixContentHeight(),Metronic.initAjax()},error:function(e,t,i){a.html("<h4>Could not load the requested content.</h4>"),g()}})}),$(document).on("click",".page-header-fixed-mobile .page-header .responsive-toggler",function(){scrollTop()}),x(),$(".page-sidebar").on("click",".sidebar-search .remove",function(e){e.preventDefault(),$(".sidebar-search").removeClass("open")}),$(".page-sidebar .sidebar-search").on("keypress","input.form-control",function(e){if(13==e.which)return $(".sidebar-search").submit(),!1}),$(".sidebar-search .submit").on("click",function(e){e.preventDefault(),$("body").hasClass("page-sidebar-closed")&&!1===$(".sidebar-search").hasClass("open")?(1===$(".page-sidebar-fixed").size()&&$(".page-sidebar .sidebar-toggler").click(),$(".sidebar-search").addClass("open")):$(".sidebar-search").submit()}),0!==$(".sidebar-search").size()&&($(".sidebar-search .input-group").on("click",function(e){e.stopPropagation()}),$("body").on("click",function(){$(".sidebar-search").hasClass("open")&&$(".sidebar-search").removeClass("open")})),a=$("body"),$.cookie&&"1"===$.cookie("sidebar_closed")&&p().width>=l&&($("body").addClass("page-sidebar-closed"),$(".page-sidebar-menu").addClass("page-sidebar-menu-closed")),$("body").on("click",".sidebar-toggler",function(e){var t=$(".page-sidebar"),i=$(".page-sidebar-menu");$(".sidebar-search",t).removeClass("open"),a.hasClass("page-sidebar-closed")?(a.removeClass("page-sidebar-closed"),i.removeClass("page-sidebar-menu-closed"),$.cookie&&$.cookie("sidebar_closed","0")):(a.addClass("page-sidebar-closed"),i.addClass("page-sidebar-menu-closed"),a.hasClass("page-sidebar-fixed")&&i.trigger("mouseleave"),$.cookie&&$.cookie("sidebar_closed","1")),$(window).trigger("resize")}),b(C)},initContent:function(){S(),$("body").on("shown.bs.tab",'a[data-toggle="tab"]',function(){w()}),b(w),b(S)},initFooter:function(){navigator.userAgent.match(/iPhone|iPad|iPod/i)?$(window).bind("touchend touchcancel touchleave",function(e){300<$(this).scrollTop()?$(".scroll-to-top").fadeIn(500):$(".scroll-to-top").fadeOut(500)}):$(window).scroll(function(){300<$(this).scrollTop()?$(".scroll-to-top").fadeIn(500):$(".scroll-to-top").fadeOut(500)}),$(".scroll-to-top").click(function(e){return e.preventDefault(),$("html, body").animate({scrollTop:0},500),!1})},init:function(e,t){var i,a,n;h(e),o?$(window).resize(function(){a!=document.documentElement.clientHeight&&(i&&clearTimeout(i),i=setTimeout(function(){m()},50),a=document.documentElement.clientHeight)}):$(window).resize(function(){i&&clearTimeout(i),i=setTimeout(function(){m()},50)}),this.initHeader(),this.initSidebar(),this.initContent(),this.initFooter(),_(t),T(),I(),H(),M(),D(),function(){var t,i,a,n,o;$("body").on("click",".md-checkbox > label, .md-radio > label",function(){var e=$(this),t=$(this).children("span:first-child");t.addClass("inc");var i=t.clone(!0);t.before(i),$("."+t.attr("class")+":last",e).remove()}),$("body").hasClass("page-md")&&$("body").on("click","a.btn, button.btn, input.btn, label.btn",function(e){0==(t=$(this)).find(".md-click-circle").length&&t.prepend("<span class='md-click-circle'></span>"),(i=t.find(".md-click-circle")).removeClass("md-click-animate"),i.height()||i.width()||(a=Math.max(t.outerWidth(),t.outerHeight()),i.css({height:a,width:a})),n=e.pageX-t.offset().left-i.width()/2,o=e.pageY-t.offset().top-i.height()/2,i.css({top:o+"px",left:n+"px"}).addClass("md-click-animate"),setTimeout(function(){i.remove()},1e3)});var s=function(e){""!=e.val()?e.addClass("edited"):e.removeClass("edited")};$("body").on("keydown",".form-md-floating-label .form-control",function(e){s($(this))}),$("body").on("blur",".form-md-floating-label .form-control",function(e){s($(this))}),$(".form-md-floating-label .form-control").each(function(){0<$(this).val().length&&$(this).addClass("edited")})}(),$(".send-passkey").click(function(){var t=$(this);mobile_field=t.attr("mobile");var e=t.parents("form").find('[name="'+mobile_field+'"]');if(e.prop("btn_passkey",t),intlTelInput=e.data("plugin_intlTelInput"),intlTelInput?(mobile=intlTelInput.getNumber(),dialCode="+"+intlTelInput.getSelectedCountryData().dialCode,mobile==dialCode&&(mobile="")):mobile=e.val(),""==mobile)return e.focus(),void $(e).valid();t.prop("disabled",!0),t.prop("timeout",""),t.find("span").html("...");var i=t.closest(".form-group").find('input[type="text"]');t.prop("text_passkey",i),i.val(""),i.prop("readonly",!0),c("api/common/send_passkey",{phone_num:mobile}).done(function(e){alertBox(g_messages.ALERT,g_messages.ERR_SUCCESS_SEND_PASSKYE,null,5e3),t.prop("disabled")&&(t.prop("timeout",60),t.find("span").html("(60s)"),t.prop("text_passkey").prop("readonly",!1),t.closest(".form-group").find(".help-block-error").remove())}).fail(function(e){errorBox(g_messages.FAILURE,g_messages.ERR_FAIL_SEND_PASSKEY),t.prop("disabled")&&(t.prop("timeout",60),t.find("span").html("(60s)"),t.prop("text_passkey").prop("readonly",!1),t.closest(".form-group").find(".help-block-error").remove())}),e.change(function(){var e=$(this).prop("btn_passkey");e.prop("timeout",0),e.prop("disabled",!1),e.find("span").html(""),e.closest(".form-group").find('input[type="text"]').val("")})}),$(".send-passkey").length&&setInterval(function(){$(".send-passkey").each(function(){var e=$(this);if(e.prop("disabled")){if(timeout=e.prop("timeout"),""===timeout)return;if(0<timeout&&e.find("span").html("("+timeout+"s)"),timeout--,timeout<0){e.prop("timeout",0),e.prop("disabled",!1),e.find("span").html("");var t=e.closest(".form-group").find('input[type="text"]');return t.attr("timeout",!0),void t.valid()}e.prop("timeout",timeout)}})},1e3),n=function(e,t){void 0===t&&(t=!0),intlTelInput=e.data("plugin_intlTelInput"),fullNumber=intlTelInput.getNumber(),prefix="+"+intlTelInput.selectedCountryData.dialCode,val=e.val(),0==fullNumber.indexOf(prefix)&&(strip_number=fullNumber.substring(prefix.length),0==t&&e.val(strip_number)),t&&(fullNumber==prefix&&(fullNumber=""),e.val(fullNumber))},$(".input-intl-tel").each(function(){$(this).intlTelInput({autoHideDialCode:!0,formatOnDisplay:!0,geoIpLookup:function(i){$.getJSON("https://ipapi.co/json/",function(e){var t=e&&e.country?e.country.toLowerCase():"cn";i(t)})},initialCountry:"auto",nationalMode:!0,placeholderNumberType:"MOBILE",preferredCountries:["cn","us"],separateDialCode:!0}),$(this).on("change",function(){n($(this),!1),$(this).valid()}),$(this).parents("form").addClass("intl-tel-form"),n($(this),!1)}),$(".intl-tel-form").on("submit",function(){$(this).find(".input-intl-tel").each(function(){n($(this))}),setTimeout("$('.intl-tel-form').resetTelNumber()",10)}),$.fn.extend({resetTelNumber:function(){$(this).find(".input-intl-tel").each(function(){n($(this),!1)})}}),$.fn.ajaxForm&&(orgAjaxForm=$.fn.ajaxForm,$.extend($.fn,{ajaxForm:function(e){var t=null;return e.beforeSubmit&&(t=e.beforeSubmit),e.beforeSubmit=function(){var e=!0;return t&&!1===(e=t.apply(this,arguments))?e:!0!==this.submitting&&(this.submitting=!0)},e.complete=function(){this.submitting=!1},orgAjaxForm.apply(this,[e])}})),$.fn.cycle&&$(".notice-list").length&&($(window).resize(function(){var e=$(".page-logo").width(),t=$(".top-menu").width(),i=$(window).width();$(".notice-list").width(i-e-t-150)}),$(window).resize(),1<$(".notice-list li").length?($(".cyclebar ul").cycle({fx:"scrollDown",easing:"easeOutCubic",speed:600,timeout:5e3,height:40}),$(".cyclebar ul li").live("hover",function(){$(".cyclebar ul").cycle("toggle")})):$(".notice-list li").css("display","block"))},initPopup:function(e,t){h(e),_(t),T(),I(),H(),M(),D()},initFancybox:function(e){D(e)},fixContentHeight:function(){w()},initFixedSidebarHoverEffect:function(){x()},initFixedSidebar:function(){C()},getLayoutImgPath:function(){return Metronic.getAssetsPath()+"admin/layout/img/"},getLayoutCssPath:function(){return Metronic.getAssetsPath()+"admin/layout/css/"},initQuickSidebar:function(){var i,e,a,t;$(".top-menu .dropdown-quick-sidebar-toggler a, .page-quick-sidebar-toggler").click(function(e){$("body").toggleClass("page-quick-sidebar-open")}),function(){var n=$(".page-quick-sidebar-wrapper"),l=n.find(".page-quick-sidebar-chat"),e=function(){var e,t=n.find(".page-quick-sidebar-chat-users");e=n.height()-n.find(".nav-justified > .nav-tabs").outerHeight(),y(t),t.attr("data-height",e),v(t);var i=l.find(".page-quick-sidebar-chat-user-messages"),a=e-l.find(".page-quick-sidebar-chat-user-form").outerHeight()-l.find(".page-quick-sidebar-nav").outerHeight();y(i),i.attr("data-height",a),v(i)};e(),b(e),n.find(".page-quick-sidebar-chat-users .media-list > .media").click(function(){l.addClass("page-quick-sidebar-content-item-shown")}),n.find(".page-quick-sidebar-chat-user .page-quick-sidebar-back-to-list").click(function(){l.removeClass("page-quick-sidebar-content-item-shown")});var t=function(e){e.preventDefault();var i=l.find(".page-quick-sidebar-chat-user-messages"),t=l.find(".page-quick-sidebar-chat-user-form .form-control"),a=t.val();if(0!==a.length){var n=function(e,t,i,a,n){var o="";return o+='<div class="post '+e+'">',o+='<img class="avatar" alt="" src="'+App.getLayoutImgPath()+a+'.jpg"/>',o+='<div class="message">',o+='<span class="arrow"></span>',o+='<a href="#" class="name">Bob Nilson</a>&nbsp;',o+='<span class="datetime">'+t+"</span>",o+='<span class="body">',o+=n,o+="</span>",o+="</div>",o+="</div>"},o=new Date,s=n("out",o.getHours()+":"+o.getMinutes(),0,"avatar3",a);s=$(s),i.append(s);var r=function(){var e=0;return i.find(".post").each(function(){e+=$(this).outerHeight()}),e};i.slimScroll({scrollTo:r()}),t.val(""),setTimeout(function(){var e=new Date,t=n("in",e.getHours()+":"+e.getMinutes(),0,"avatar2","Lorem ipsum doloriam nibh...");t=$(t),i.append(t),i.slimScroll({scrollTo:r()})},3e3)}};l.find(".page-quick-sidebar-chat-user-form .btn").click(t),l.find(".page-quick-sidebar-chat-user-form .form-control").keypress(function(e){if(13==e.which)return t(e),!1})}(),(i=$(".page-quick-sidebar-wrapper")).find(".page-quick-sidebar-alerts"),(e=function(){var e,t=i.find(".page-quick-sidebar-alerts-list");e=i.height()-i.find(".nav-justified > .nav-tabs").outerHeight(),y(t),t.attr("data-height",e),v(t)})(),b(e),(a=$(".page-quick-sidebar-wrapper")).find(".page-quick-sidebar-settings"),(t=function(){var e,t=a.find(".page-quick-sidebar-settings-list");e=a.height()-a.find(".nav-justified > .nav-tabs").outerHeight(),y(t),t.attr("data-height",e),v(t)})(),b(t)},callAPI:function(e,t){return c(e,t)},reload:function(e){var t=document.location.href;0<(i=t.indexOf("r="))&&(t=t.substring(0,i)),0<t.indexOf("?")?"&"!=t.substring(t.length-1)&&(t+="&"):t+="?",t+="r="+Math.floor(1e4*Math.random()),null==e&&(e=0),setTimeout(function(){document.location=t},e)}}}();